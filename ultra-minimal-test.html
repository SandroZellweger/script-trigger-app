<!DOCTYPE html>
<html>
<head>
    <title>Ultra Minimal Test</title>
</head>
<body>
    <h1>Ultra Minimal Google Apps Script Test</h1>
    <button onclick="testBasic()">Test Basic</button>
    <button onclick="clearOutput()">Clear Output</button>
    <div id="output"></div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxKRsUepl3CjBYVnFQ_9Zd23mAyH_IogOYvEEqXicxSqaPm7_w_bi_7-wEVvL6ZJdsd/exec';

        function log(message) {
            const output = document.getElementById('output');
            output.innerHTML += `<div style="margin: 5px 0; padding: 5px; background: #f5f5f5; border-left: 3px solid #007cba;">${new Date().toLocaleTimeString()}: ${message}</div>`;
        }

        function clearOutput() {
            document.getElementById('output').innerHTML = '';
        }

        async function testBasic() {
            log('Testing ultra-minimal script...');
            try {
                const url = `${SCRIPT_URL}?test=hello&timestamp=${Date.now()}`;
                log(`URL: ${url}`);
                
                const response = await fetch(url);
                log(`Response status: ${response.status}`);
                log(`Response ok: ${response.ok}`);
                log(`Response headers: ${JSON.stringify([...response.headers])}`);
                
                const data = await response.text();
                log(`Response text: ${data}`);
                
                try {
                    const jsonData = JSON.parse(data);
                    log(`✅ SUCCESS! Parsed JSON: ${JSON.stringify(jsonData, null, 2)}`);
                } catch (e) {
                    log(`❌ Could not parse as JSON: ${e.message}`);
                }
            } catch (error) {
                log(`❌ Fetch Error: ${error.message}`);
            }
        }
    </script>
</body>
</html>
